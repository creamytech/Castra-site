import { NextResponse } from "next/server"; import { templates, nameFromEmail } from "@/lib/templates"; export async function POST(req: Request) { const { intent = "tour", tone = "Friendly", slots = [], from = "there@example.com" } = await req.json(); const bucket = (templates as any)[intent] || (templates as any).tour; const fn = bucket?.[tone] || bucket?.["Friendly"]; const name = nameFromEmail(from); const text = typeof fn === "function" ? fn(name, slots) : String(fn); return NextResponse.json({ text }); }
