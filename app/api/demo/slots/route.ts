import { NextResponse } from "next/server"; import { busyBlocks } from "@/lib/busy"; export async function GET() { const now = new Date(); const slots: string[] = []; const ranges = busyBlocks.map(([s, e]) => [new Date(s), new Date(e)]); const isBusy = (t: Date) => ranges.some(([s, e]) => t >= s && t < e); for (let d = 0; d < 10; d++) { for (let h = 9; h <= 17; h++) { for (let m of [0, 30]) { const t = new Date(now); t.setDate(now.getDate() + d); t.setHours(h, m, 0, 0); if (t > now && !isBusy(t)) slots.push(t.toISOString()); } } } return NextResponse.json({ slots }); }
